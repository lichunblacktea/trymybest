<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <base target="_top">
  <link rel="stylesheet" href="style.css">
  <style>
    #editor {
      height: 400px; /* Set the desired height */
    }
  </style>
</head>
<body>
  <header>
    <nav id="navbar"></nav> <!-- Placeholder for the navigation -->
  </header>
  <script src = 'indexScript.js'></script>
  <h1>Create New Blog Post</h1>
  <form id="blogForm">
    <!-- Toolbar Container -->
    <div id="toolbar">
      <div id="default-toolbar">
        <!-- Basic Formatting -->
        <button class="ql-bold">Bold</button>
        <button class="ql-italic">Italic</button>
        <button class="ql-underline">Underline</button>
        <button class="ql-strike">Strike-through</button>

        <!-- Block Elements -->
        <button class="ql-blockquote">Blockquote</button>
        <button class="ql-code-block">Code Block</button>

        <!-- Links and Media -->
        <button class="ql-link">Link</button>
        <button class="ql-image">Image</button>
        <button class="ql-video">Video</button>
        <button class="ql-formula">Formula</button>

        <!-- Headers -->
        <select class="ql-header">
          <option value="1">Header 1</option>
          <option value="2">Header 2</option>
          <option value="3">Header 3</option>
          <option value="4">Header 4</option>
          <option value="5">Header 5</option>
          <option value=  >Normal</option>
        </select>

        <!-- Lists -->
        <button class="ql-list" value="ordered">Ordered List</button>
        <button class="ql-list" value="bullet">Bullet List</button>
        <button class="ql-list" value="check">Check List</button>

        <!-- Script Formatting -->
        <button class="ql-script" value="sub">Subscript</button>
        <button class="ql-script" value="super">Superscript</button>

        <!-- Indentation -->
        <button class="ql-indent" value="-1">Decrease Indent</button>
        <button class="ql-indent" value="+1">Increase Indent</button>

        <!-- Text Direction -->
        <button class="ql-direction" value="rtl">Right-to-Left</button>

        <!-- Size -->
        <select class="ql-size">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
        </select>

        <!-- Font -->
        <select class="ql-font">
          <option selected></option>
          <option value="serif">Serif</option>
          <option value="monospace">Monospace</option>
        </select>

        <!-- Alignment -->
        <button class="ql-align" value="left">Left Align</button>
        <button class="ql-align" value="center">Center Align</button>
        <button class="ql-align" value="right">Right Align</button>
        <button class="ql-align" value="justify">Justify</button>

        <!-- Color and Background -->
        <select class="ql-color">
          <option value="black" selected>Black</option>
          <option value="red">Red</option>
          <option value="green">Green</option>
          <option value="blue">Blue</option>
          <option value="orange">Orange</option>
          <option value="purple">Purple</option>
          <option value="pink">Pink</option>
          <option value="gray">Gray</option>
          <option value="brown">Brown</option>
          <option value="cyan">Cyan</option>
          <option value="magenta">Magenta</option>
        </select>
        <select class="ql-background">
          <option value="yellow">Yellow</option>
          <option value="pink">Pink</option>
          <option value="lightblue">Light Blue</option>
          <option value="transparent" selected>Transparent</option>
        </select>
        <input type="color" id="hex-color-picker" class="ql-color-picker" title="Pick a Color">

        <!-- Clear Formatting -->
        <button class="ql-clean">Clear Formatting</button>
      </div>
    </div>

    <!-- Editor Container -->
    <div id="editor" style="height: 400px;"></div>

    <input type="submit" value="Submit">
  </form>
  <script>
    document.getElementById('blogForm').onsubmit = function(event) {
      event.preventDefault();
      var content = quill.root.innerHTML;
      //var formatedTitle = "\"" + title +"\""
      var formatedContent = "\"" + content+ "\""
      console.log(formatedContent);
      google.script.run.addBlogPosted(formatedContent);
      alert('Blog post added successfully!');
      //clean the textarea
      
    };
  </script>
    

  <script>
    var quill = new Quill('#editor', {
      theme: 'snow',
      modules: {
        toolbar: {
          container: '#default-toolbar',
          handlers: {
            'color': function (value) {
              if (value === 'hex') {
                const colorInput = document.getElementById('hex-color-picker');
                colorInput.click();
                colorInput.addEventListener('input', function() {
                  quill.format('color', colorInput.value);
                });
              } else {
                quill.format('color', value);
              }
            }
          }
        }
      }
    });

    // Optional: Handle HEX color picker
    document.getElementById('hex-color-picker').addEventListener('input', function() {
      quill.format('color', this.value);
    });
  </script>

  <script src = "script.js"></script>  
</body>
</html>
